<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <title>COVID Rapid-test Simulation</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no">
    <meta name="Referrer" content="origin">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="canonical" href="">
    <meta name="theme-color" content="#ffffff">

    <!-- <link rel="stylesheet" href="https://bootflat.github.io/bootflat/css/bootflat.css"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/@coreui/icons@2.0.0-beta.3/css/free.min.css">
    <link rel="stylesheet" href="./styles.css" />

    <meta name="description" content="">
    <meta name="keywords" content="COVID,Rapid Testing">

    <!-- Facebook -->
    <meta property="og:app_id" content="">
    <meta property="og:title" content="">
    <meta property="og:description" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">

    <!-- Twitter -->
    <meta name="twitter:card" content="">
    <meta name="twitter:site" content="">
    <meta name="twitter:title" content="">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">

    <!-- LinkedIn -->
    <meta property="og:title" content="">
    <meta property="og:image" content="">
    <meta property="og:description" content="">
    <meta property="og:url" content="">

</head>
<body>
    <div class="container-md">

        <div class="block sm">
            <h1>COVID Visual Simulation</h1>
            <p>This is a visual simulation to communicate the spread of COVID among a population, and the power of isolation in controlling spread.</p>
        </div>

        <div id="Simulation1">
            <div class="row block sm">
                <div class="col-6">
                    <dl class="stats">
                        <dt>Susceptible</dt><dd id="susceptibleNumber" class="susceptible number">0</dd>
                        <dt>Infected</dt><dd id="infectedNumber" class="infected number">0</dd>
                        <dt>Recovered</dt><dd id="recoveredNumber" class="recovered number">0</dd>
                        <dt>Deceased</dt><dd id="deceasedNumber" class="deceased number">0</dd>
                        <dt>Exposures</dt><dd class="exposed number"></dd>
                    </dl>
                </div>
                <div class="col-6 d-flex">
                    <img src="images/color_key_plain.png" class="align-self-center" style="width: 100%" alt="Color Key" />
                </div>
            </div>
            <div class="block">
                <div id="Simulation1-Graphic" class="simulation"></div>
            </div>
            <div class="block sm">
                <div class="controls row d-flex align-items-center">
                    <div class="col">
                        <strong>Population:</strong>
                        <input type="number" name="populationSize" value="200" min="50" max="2000" /><br/>
                        <strong>Infected:</strong>
                        <input type="number" name="startingInfectionRate" value="5" min="1" max="99" />%<br/>
                        <strong>Rapid testing interval (days):</strong>
                        <input type="number" name="testingInterval" value="3" min="1" max="200" /><br/>
                        <strong>Population testing:</strong>
                        <input type="number" name="testingRate" value="50" min="0" max="99" />%<br/>
                    </div>
                    <div class="col text-end">
                        <button class="btn btn-outline-secondary btn-toggleActor"> Dots</button>
                        <button class="btn btn-outline-secondary btn-pause"><i class="i cil-media-pause"></i> Pause</button>
                        <button class="btn btn-outline-secondary btn-reset"><i class="i cil-reload"></i> Reset</button>
                        <button class="btn btn-primary btn-start"><i class="i cil-media-play"></i> Start</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <footer>
        <span class="text-muted">Made in USA &#9733;</span>
    </footer>
</body>

<!-- External -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" type="text/javascript" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" type="text/javascript"></script>
<script src="https://d3js.org/d3.v3.js" type="text/javascript"></script>
<script src="https://unpkg.com/geometric@2/build/geometric.min.js" type="text/javascript"></script>

<!-- Main COVID simulation -->
<script src="./lib/simulation.js" type="text/javascript"></script>

<!-- Visualizations -->
<script src="./visuals/common.js" type="text/javascript"></script>
<script src="./visuals/canvasAnimation.js" type="text/javascript"></script>
<script>
    window.onload = function () {
        const parameters1 = new SimulationParameters({
            populationSize: 200,
            startingInfectionRate: 0.2
        });
        const stats1 = {
            infected: $('#Simulation1 .stats .infected')[0],
            recovered: $('#Simulation1 .stats .recovered')[0],
            deceased: $('#Simulation1 .stats .deceased')[0],
            exposed: $('#Simulation1 .stats .exposed')[0]
        }
        const hooks1 = {
            onInterval: function(sim) {
                stats1.infected.innerHTML = sim.totals.infected;
                stats1.recovered.innerHTML = sim.totals.recovered;
                stats1.deceased.innerHTML = sim.totals.deceased;
                stats1.exposed.innerHTML = sim.totals.exposures;
            }
            // onCollision: function(actor1, actor2) {
            //     if (actor1.status === 1 || actor2.status === 1) { }
            // }
        }
        makeCanvasAnimation('Simulation1', parameters1, {}, hooks1);

        // const parameters2 = new SimulationParameters({
        //     populationSize: 500,
        //     startingInfectionRate: 0.5
        // });
        // makeCanvasAnimation('Simulation2', parameters2);
    };
</script>

</html>
